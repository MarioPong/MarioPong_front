<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Main</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <div class="frame">
    <div class="content">
      <h1 class="logo">SUPER MARIO Pong!</h1>
      <ul class="menu">
        <li><button onclick="startGame()">1 PLAYER GAME</button></li>
        <li><button onclick="startGame2()">2 PLAYER GAME</button></li>
        <li><button onclick="userProfile()">PROFILE</button></li>
        <li><button onclick="move2store()">STORE</button></li>
        <li><button onclick="collection()">COLLECTION</button></li>
        <li><button onclick="logOut(event)">LOGOUT</button></li>
      </ul>
    </div>
  </div>

  <script>
    function startGame() {
      window.location.href = 'marioPong.html';
    }
    function startGame2() {
      alert('2인 모드는 준비중입니다.');
    }
    function userProfile() {
      window.location.href = 'profile.html';
    }
    function move2store() {
      window.location.href = 'store.html';
    }
    function collection() {
      window.location.href = 'collection.html';
    }

    function logOut(event) {
      event.preventDefault();

      fetch('https://mariopong-back.onrender.com/api/user/logout', {
        method: 'GET',
        credentials: 'include'
      })
        .then(res => res.json())
        .then(result => {

          if (result.success) {
            alert('로그아웃이 완료되었습니다.');
            window.location.href = 'login.html';
          } else {
            alert('로그아웃에 실패했습니다.');
            console.log(result.message)
          }
        })
        .catch(err => {
          alert("오류가 발생했습니다");
          console.log('네트워크 오류: ' + err.message)
        });
    }
  </script>
</body>

</html>